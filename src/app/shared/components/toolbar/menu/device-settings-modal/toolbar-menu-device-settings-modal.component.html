<ion-modal #modal [trigger]="triggerId" [breakpoints]="[0.1, 1]" [initialBreakpoint]="1">
    <ng-template>
        <ion-content>
            <div class="page-title ion-margin-bottom ion-margin-top">
                <ion-label color="primary">{{ 'DEVICE_SETTINGS' | translate }}</ion-label>
            </div>
            <ion-grid class="ion-margin-bottom">
                <ion-row class="title ion-margin-top ion-margin-bottom">
                    <ion-col size="12">
                        <ion-label color="primary">{{ 'DEVICE_DATA' | translate }}</ion-label>
                    </ion-col>
                </ion-row>
                <ng-container *ngIf="user !== undefined">
                    <ion-row>
                        <ion-col>
                            <ion-item>
                                <ion-label [hidden]="true">{{ 'DEVICE' | translate }}</ion-label>
                                <ion-select [(ngModel)]="exportDevice" placeholder="{{ 'SELECT_DEVICE' | translate }}">
                                    <ion-select-option  *ngFor="let device of this.user.devices" [value]="device.macAddress">{{ device.macAddress }}</ion-select-option>
                                </ion-select>
                            </ion-item>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col>
                            <ion-item>
                                <ion-label [hidden]="true">{{ 'DEVICE' | translate }}</ion-label>
                                <ion-select [(ngModel)]="exportDataType">
                                    <ion-select-option *ngFor="let dataType of DATA_TYPES" [value]="dataType">
                                        {{ dataType.toUpperCase() | translate }}
                                    </ion-select-option>
                                </ion-select>
                            </ion-item>
                        </ion-col>
                    </ion-row>
                    <ion-row>
                        <ion-col size="12">
                            <ion-button expand="block" color="primary" (click)="exportData()" [disabled]="!exportDevice && !exportDataType">
                                {{ 'EXPORT' | translate }}
                            </ion-button>
                        </ion-col>
                    </ion-row>
                </ng-container>
            </ion-grid>
            <ion-grid class="ion-margin-bottom">
                <ion-row class="title ion-margin-top ion-margin-bottom">
                <ion-col size="12">
                    <ion-label color="primary">{{ 'CHANGE_DEVICE' | translate }}</ion-label>
                </ion-col>
                </ion-row>
                <ng-container *ngIf="user !== undefined">
                    <ion-row>
                        <ion-col>
                            <ion-item>
                                <ion-label [hidden]="true">{{ 'DEVICE' | translate }}</ion-label>
                                <ion-select [(ngModel)]="this.currentDevice" #deviceSelect (ionChange)="changeDevice(deviceSelect.value)" placeholder="{{ 'SELECT_DEVICE' | translate }}">
                                    <ion-select-option *ngFor="let device of this.user.devices" [value]="device.macAddress">
                                        {{ device.macAddress }}
                                    </ion-select-option>
                                </ion-select>
                            </ion-item>
                        </ion-col>
                    </ion-row>
                </ng-container>
            </ion-grid>
            <ion-grid>
                <ion-row class="title ion-margin-top ion-margin-bottom">
                    <ion-col size="12">
                        <ion-label color="primary">{{ 'ADD_DEVICE' | translate }}</ion-label>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col size="12">
                        <ion-button expand="block" color="primary" (click)="goToSetup()">
                            {{ 'SETUP_NEW_DEVICE' | translate }}
                        </ion-button>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-content>
    </ng-template>
</ion-modal>
